// Lesson 4 Module
window.lessonModules = window.lessonModules || {};

const lesson4 = {
    vocabulary: [
        {
            "en": "to read",
            "es": "leer",
            "example": "I like to read books.",
            "audio": "L4_read_audio"
        },
        {
            "en": "to say",
            "es": "decir",
            "example": "What did you say?",
            "audio": "L4_say_audio"
        },
        {
            "en": "to write",
            "es": "escribir",
            "example": "I write letters.",
            "audio": "L4_write_audio"
        },
        {
            "en": "to use",
            "es": "usar",
            "example": "I use a pencil.",
            "audio": "L4_use_audio"
        },
        {
            "en": "to take",
            "es": "llevar, tomar",
            "example": "Take your book.",
            "audio": "L4_take_audio"
        },
        {
            "en": "on",
            "es": "en, sobre",
            "example": "The book is on the table.",
            "audio": "L4_on_audio"
        },
        {
            "en": "at",
            "es": "en",
            "example": "I'm at school.",
            "audio": "L4_at_audio"
        },
        {
            "en": "from",
            "es": "de",
            "example": "I'm from Mexico.",
            "audio": "L4_from_audio"
        },
        {
            "en": "this",
            "es": "este, esta, esto",
            "example": "This book is mine.",
            "audio": "L4_this_audio"
        },
        {
            "en": "this one",
            "es": "éste, ésta",
            "example": "This one is red.",
            "audio": "L4_thisone_audio"
        },
        {
            "en": "these",
            "es": "estos, estas; éstos, éstas",
            "example": "These books are mine.",
            "audio": "L4_these_audio"
        },
        {
            "en": "how",
            "es": "cómo",
            "example": "How are you?",
            "audio": "L4_how_audio"
        },
        {
            "en": "how many",
            "es": "cuántos",
            "example": "How many books do you have?",
            "audio": "L4_howmany_audio"
        },
        {
            "en": "good",
            "es": "bueno",
            "example": "The book is good.",
            "audio": "L4_good_audio"
        },
        {
            "en": "well",
            "es": "bien",
            "example": "I am well.",
            "audio": "L4_well_audio"
        },
        {
            "en": "book",
            "es": "libro",
            "example": "The book is on the table.",
            "audio": "L4_book_audio"
        },
        {
            "en": "notebook",
            "es": "cuaderno",
            "example": "My notebook is blue.",
            "audio": "L4_notebook_audio"
        },
        {
            "en": "pencil",
            "es": "lápiz",
            "example": "I write with a pencil.",
            "audio": "L4_pencil_audio"
        },
        {
            "en": "pen",
            "es": "pluma",
            "example": "This is my pen.",
            "audio": "L4_pen_audio"
        },
        {
            "en": "letter",
            "es": "carta; letra",
            "example": "I write a letter.",
            "audio": "L4_letter_audio"
        },
        {
            "en": "there is, there are",
            "es": "hay",
            "example": "There is a book on the table.",
            "audio": "L4_thereis_audio"
        },
        {
            "en": "is there?, are there?",
            "es": "¿hay?",
            "example": "Is there a pen on the desk?",
            "audio": "L4_isthere_audio"
        }
    ],

    // Teaching concepts for Lesson 4
    teachingConcepts: {
        title: "MODISMOS COMUNES",
        explanation: "Los siguientes modismos son expresiones comunes en inglés para presentaciones y saludos.",
        commonPhrases: [
            { en: "How are you?", es: "¿Cómo está Ud.?" },
            { en: "Fine, thank you.", es: "Bien, gracias." },
            { en: "What's your name?", es: "¿Cómo se llama?" },
            { en: "My name is John.", es: "Me llamo Juan." },
            { en: "first name", es: "nombre de pila" },
            { en: "last name", es: "apellido" },
            { en: "He's at home.", es: "Él está en casa." }
        ]
    },

    // Exercise 1 - Translation exercise
    translationExercise1: [
        { q: "Where are you?", a: "¿Dónde está Ud.?", audio: "L4_ex1_1" },
        { q: "How are you?", a: "¿Cómo está Ud.?", audio: "L4_ex1_2" },
        { q: "He's at home.", a: "Él está en casa.", audio: "L4_ex1_3" },
        { q: "He isn't at home.", a: "Él no está en casa.", audio: "L4_ex1_4" },
        { q: "Is she at home?", a: "¿Está ella en casa?", audio: "L4_ex1_5" },
        { q: "Isn't she at home?", a: "¿No está ella en casa?", audio: "L4_ex1_6" },
        { q: "We're in school.", a: "Estamos en la escuela.", audio: "L4_ex1_7" },
        { q: "We aren't in school.", a: "No estamos en la escuela.", audio: "L4_ex1_8" },
        { q: "Is Mary in school?", a: "¿Está Mary en la escuela?", audio: "L4_ex1_9" },
        { q: "Isn't Mary in school?", a: "¿No está Mary en la escuela?", audio: "L4_ex1_10" },
        { q: "You're an American.", a: "Ud. es americano.", audio: "L4_ex1_11" },
        { q: "You aren't an American.", a: "Ud. no es americano.", audio: "L4_ex1_12" },
        { q: "Are they Americans?", a: "¿Son ellos americanos?", audio: "L4_ex1_13" },
        { q: "Aren't they Americans?", a: "¿No son ellos americanos?", audio: "L4_ex1_14" },
        { q: "Where's the car?", a: "¿Dónde está el carro?", audio: "L4_ex1_15" },
        { q: "Where are the notebooks?", a: "¿Dónde están los cuadernos?", audio: "L4_ex1_16" },
        { q: "The boys go to school.", a: "Los muchachos van a la escuela.", audio: "L4_ex1_17" },
        { q: "The girls go to school too.", a: "Las muchachas van a la escuela también.", audio: "L4_ex1_18" },
        { q: "Where is the telephone?", a: "¿Dónde está el teléfono?", audio: "L4_ex1_19" },
        { q: "It's in the office.", a: "Está en la oficina.", audio: "L4_ex1_20" },
        { q: "Robert goes to school.", a: "Robert va a la escuela.", audio: "L4_ex1_21" },
        { q: "My sister goes to school.", a: "Mi hermana va a la escuela.", audio: "L4_ex1_22" },
        { q: "They come to school.", a: "Ellos vienen a la escuela.", audio: "L4_ex1_23" },
        { q: "I come to school too.", a: "Yo vengo a la escuela también.", audio: "L4_ex1_24" },
        { q: "Mr. Hunt works in an office.", a: "El Sr. Hunt trabaja en una oficina.", audio: "L4_ex1_25" }
    ],

    // Exercise 2 - Preposition and translation exercise
    prepositionExercise2: [
        { q: "My father is (en) _______ home.", prep: "at", a: "Mi padre está en casa.", audio: "L4_ex2_1" },
        { q: "My little brothers are (en) _______ school.", prep: "at", a: "Mis hermanitos están en la escuela.", audio: "L4_ex2_2" },
        { q: "My father works (en) _______ an office.", prep: "at", a: "Mi padre trabaja en una oficina.", audio: "L4_ex2_3" },
        { q: "My sister comes (de) _______ school.", prep: "from", a: "Mi hermana viene de la escuela.", audio: "L4_ex2_4" },
        { q: "The letter is (sobre) _______ the table.", prep: "on", a: "La carta está sobre la mesa.", audio: "L4_ex2_5" },
        { q: "The pencil is (en) _______ the notebook.", prep: "in", a: "El lápiz está en el cuaderno.", audio: "L4_ex2_6" },
        { q: "John is (en) _______ the movies.", prep: "at", a: "John está en el cine.", audio: "L4_ex2_7" },
        { q: "I come (de) _______ home.", prep: "from", a: "Vengo de casa.", audio: "L4_ex2_8" },
        { q: "My sister goes (a) _______ school.", prep: "to", a: "Mi hermana va a la escuela.", audio: "L4_ex2_9" },
        { q: "This pen is (sobre) _______ the desk.", prep: "on", a: "Esta pluma está sobre el escritorio.", audio: "L4_ex2_10" },
        { q: "I work (en) _______ Insurgentes.", prep: "on", a: "Trabajo en Insurgentes.", audio: "L4_ex2_11" },
        { q: "I work (en) _______ 4 Insurgentes.", prep: "at", a: "Trabajo en Insurgentes 4.", audio: "L4_ex2_12" }
    ],

    // Exercise 3 - Multiple forms exercise
    transformationExercise3: [
        {
            q: "The table is green.",
            forms: {
                affirmative: "La mesa es verde.",
                negative: "The table is not green.",
                interrogative: "Is the table green?",
                negativeInterrogative: "Isn't the table green?"
            }
        },
        {
            q: "My first name is John.",
            forms: {
                affirmative: "Mi nombre de pila es John.",
                negative: "My first name is not John.",
                interrogative: "Is my first name John?",
                negativeInterrogative: "Isn't my first name John?"
            }
        },
        {
            q: "My last name is Hunt.",
            forms: {
                affirmative: "Mi apellido es Hunt.",
                negative: "My last name is not Hunt.",
                interrogative: "Is my last name Hunt?",
                negativeInterrogative: "Isn't my last name Hunt?"
            }
        },
        {
            q: "The woman is in the house.",
            forms: {
                affirmative: "La mujer está en la casa.",
                negative: "The woman is not in the house.",
                interrogative: "Is the woman in the house?",
                negativeInterrogative: "Isn't the woman in the house?"
            }
        },
        {
            q: "My father is in the office.",
            forms: {
                affirmative: "Mi padre está en la oficina.",
                negative: "My father is not in the office.",
                interrogative: "Is my father in the office?",
                negativeInterrogative: "Isn't my father in the office?"
            }
        },
        {
            q: "My brothers are at school.",
            forms: {
                affirmative: "Mis hermanos están en la escuela.",
                negative: "My brothers are not at school.",
                interrogative: "Are my brothers at school?",
                negativeInterrogative: "Aren't my brothers at school?"
            }
        },
        {
            q: "The girl is in the house.",
            forms: {
                affirmative: "La niña está en la casa.",
                negative: "The girl is not in the house.",
                interrogative: "Is the girl in the house?",
                negativeInterrogative: "Isn't the girl in the house?"
            }
        },
        {
            q: "A man is in the office.",
            forms: {
                affirmative: "Un hombre está en la oficina.",
                negative: "A man is not in the office.",
                interrogative: "Is a man in the office?",
                negativeInterrogative: "Isn't a man in the office?"
            }
        },
        {
            q: "A book is on the desk.",
            forms: {
                affirmative: "Un libro está sobre el escritorio.",
                negative: "A book is not on the desk.",
                interrogative: "Is a book on the desk?",
                negativeInterrogative: "Isn't a book on the desk?"
            }
        },
        {
            q: "My sisters are at the movies.",
            forms: {
                affirmative: "Mis hermanas están en el cine.",
                negative: "My sisters are not at the movies.",
                interrogative: "Are my sisters at the movies?",
                negativeInterrogative: "Aren't my sisters at the movies?"
            }
        }
    ],

    // Exercise 4 - There is/There are exercise
    thereIsExercise4: [
        {
            q: "_______ an apple on the desk.",
            a: "There is",
            translation: "Hay una manzana sobre el escritorio.",
            audio: "There is an apple on the desk"
        },
        {
            q: "_______ two boys with my brothers.",
            a: "There are",
            translation: "Hay dos muchachos con mis hermanos.",
            audio: "There are two boys with my brothers"
        },
        {
            q: "How many girls _______ in the house?",
            a: "are there",
            translation: "¿Cuántas muchachas hay en la casa?",
            audio: "How many girls are there in the house?"
        },
        {
            q: "_______ an American woman here.",
            a: "There is",
            translation: "Hay una mujer americana aquí.",
            audio: "There is an American woman here"
        },
        {
            q: "________(negativo) two green pencils.",
            a: "There aren't",
            translation: "No hay dos lápices verdes.",
            audio: "There aren't two green pencils"
        },
        {
            q: "How many green pencils _______?",
            a: "are there",
            translation: "¿Cuántos lápices verdes hay?",
            audio: "How many green pencils are there?"
        },
        {
            q: "How many green pens _______ on the table?",
            a: "are there",
            translation: "¿Cuántas plumas verdes hay sobre la mesa?",
            audio: "How many green pens are there on the table?"
        },
        {
            q: "_______(negativo) a telephone in the office.",
            a: "There isn't",
            translation: "No hay un teléfono en la oficina.",
            audio: "There isn't a telephone in the office"
        },
        {
            q: "_______ four red pencils and five green pens.",
            a: "There are",
            translation: "Hay cuatro lápices rojos y cinco plumas verdes.",
            audio: "There are four red pencils and five green pens"
        },
        {
            q: "_______ three boys and two girls.",
            a: "There are",
            translation: "Hay tres muchachos y dos muchachas.",
            audio: "There are three boys and two girls"
        }
    ],

    // Exercise 5 - This/These/This one exercise
    thisTheseExercise5: [
        {
            q: "_______ man is my father.",
            a: "This",
            translation: "Este hombre es mi padre.",
            audio: "This man is my father"
        },
        {
            q: "_______ is my book and _______ is yours.",
            a: "This,this one",
            translation: "Este es mi libro y éste es el tuyo.",
            audio: "This is my book and this one is yours"
        },
        {
            q: "_______ girls go to school.",
            a: "These",
            translation: "Estas muchachas van a la escuela.",
            audio: "These girls go to school"
        },
        {
            q: "_______ book. I use _______ too.",
            a: "This,this one",
            translation: "Este libro. Yo uso éste también.",
            audio: "This book. I use this one too"
        },
        {
            q: "_______ are my pencils.",
            a: "These",
            translation: "Estos son mis lápices.",
            audio: "These are my pencils"
        },
        {
            q: "_______ pencil is red, and _______ is green.",
            a: "This,this one",
            translation: "Este lápiz es rojo, y éste es verde.",
            audio: "This pencil is red, and this one is green"
        },
        {
            q: "John takes _______ red books to school. I take _______ too.",
            a: "these,these",
            translation: "Juan lleva estos libros rojos a la escuela. Yo llevo éstos también.",
            audio: "John takes these red books to school. I take these too"
        },
        {
            q: "I use _______ pencils in the office.",
            a: "these",
            translation: "Yo uso estos lápices en la oficina.",
            audio: "I use these pencils in the office"
        },
        {
            q: "_______ boys are good.",
            a: "These",
            translation: "Estos muchachos son buenos.",
            audio: "These boys are good"
        }
    ],

    // Exercise 6 - Translation exercise with there is/there are
    translationExercise6: [
        {
            q: "There's a boy here.",
            a: "Hay un muchacho aquí.",
            audio: "There's a boy here"
        },
        {
            q: "There are two girls in the house.",
            a: "Hay dos muchachas en la casa.",
            audio: "There are two girls in the house"
        },
        {
            q: "There's a book on the table.",
            a: "Hay un libro sobre la mesa.",
            audio: "There's a book on the table"
        },
        {
            q: "There are three pens in my notebook.",
            a: "Hay tres plumas en mi cuaderno.",
            audio: "There are three pens in my notebook"
        },
        {
            q: "There's a letter for you.",
            a: "Hay una carta para usted.",
            audio: "There's a letter for you"
        },
        {
            q: "There are many books here.",
            a: "Hay muchos libros aquí.",
            audio: "There are many books here"
        },
        {
            q: "Is there a pencil on the desk?",
            a: "¿Hay un lápiz sobre el escritorio?",
            audio: "Is there a pencil on the desk?"
        },
        {
            q: "Are there any books?",
            a: "¿Hay libros?",
            audio: "Are there any books?"
        }
    ],

    // Exercise 7 - Verbal Practice exercise
    verbalPracticeExercise7: [
        {
            q: "I read a book.",
            translation: "Yo leo un libro.",
            audio: "I read a book"
        },
        {
            q: "You read a book.",
            translation: "Usted lee un libro.",
            audio: "You read a book"
        },
        {
            q: "He reads a book.",
            translation: "Él lee un libro.",
            audio: "He reads a book"
        },
        {
            q: "John reads a letter.",
            translation: "John lee una carta.",
            audio: "John reads a letter"
        },
        {
            q: "The boy reads too.",
            translation: "El muchacho lee también.",
            audio: "The boy reads too"
        },
        {
            q: "Miss Hunt reads too.",
            translation: "La Srta. Hunt lee también.",
            audio: "Miss Hunt reads too"
        },
        {
            q: "Robert reads too.",
            translation: "Robert lee también.",
            audio: "Robert reads too"
        },
        {
            q: "He reads at home.",
            translation: "Él lee en casa.",
            audio: "He reads at home"
        },
        {
            q: "She reads at home.",
            translation: "Ella lee en casa.",
            audio: "She reads at home"
        },
        {
            q: "They read at home.",
            translation: "Ellos leen en casa.",
            audio: "They read at home"
        },
        {
            q: "I read in school.",
            translation: "Yo leo en la escuela.",
            audio: "I read in school"
        },
        {
            q: "John reads in school.",
            translation: "John lee en la escuela.",
            audio: "John reads in school"
        },
        {
            q: "This boy reads.",
            translation: "Este muchacho lee.",
            audio: "This boy reads"
        },
        {
            q: "This girl reads too.",
            translation: "Esta muchacha lee también.",
            audio: "This girl reads too"
        },
        {
            q: "These boys read.",
            translation: "Estos muchachos leen.",
            audio: "These boys read"
        },
        {
            q: "These boys read too.",
            translation: "Estos muchachos leen también.",
            audio: "These boys read too"
        },
        {
            q: "Mr. and Mrs. Hunt read.",
            translation: "El Sr. y la Sra. Hunt leen.",
            audio: "Mr. and Mrs. Hunt read"
        },
        {
            q: "Miss Taylor reads too.",
            translation: "La Srta. Taylor lee también.",
            audio: "Miss Taylor reads too"
        },
        {
            q: "John and Robert read.",
            translation: "John y Robert leen.",
            audio: "John and Robert read"
        },
        {
            q: "My brother reads too.",
            translation: "Mi hermano lee también.",
            audio: "My brother reads too"
        }
    ],

    // Exercise 8 - Translation exercise
    translationExercise8: [
        {
            q: "There are five boys and four girls in this school.",
            translation: "Hay cinco muchachos y cuatro muchachas en esta escuela.",
            audio: "There are five boys and four girls in this school"
        },
        {
            q: "Robert takes two books to school.",
            translation: "Robert lleva dos libros a la escuela.",
            audio: "Robert takes two books to school"
        },
        {
            q: "Sara is my first name. My last name is Taylor.",
            translation: "Sara es mi nombre de pila. Mi apellido es Taylor.",
            audio: "Sara is my first name. My last name is Taylor"
        },
        {
            q: "Mrs. Taylor says, \"How are you?\"",
            translation: "La Sra. Taylor dice, \"¿Cómo está Ud.?\"",
            audio: "Mrs. Taylor says, How are you?"
        },
        {
            q: "How many letters are there on this table?",
            translation: "¿Cuántas cartas hay sobre esta mesa?",
            audio: "How many letters are there on this table?"
        },
        {
            q: "There aren't two notebooks here.",
            translation: "No hay dos cuadernos aquí.",
            audio: "There aren't two notebooks here"
        },
        {
            q: "There isn't a telephone in the office.",
            translation: "No hay un teléfono en la oficina.",
            audio: "There isn't a telephone in the office"
        },
        {
            q: "Aren't there boys in this school?",
            translation: "¿No hay muchachos en esta escuela?",
            audio: "Aren't there boys in this school?"
        },
        {
            q: "\"Thank you,\" says John. \"You're welcome,\" say Robert and Mary.",
            translation: "\"Gracias,\" dice John. \"De nada,\" dicen Robert y Mary.",
            audio: "Thank you, says John. You're welcome, say Robert and Mary"
        },
        {
            q: "We use books and pencils at school, and they use pencils and pens at the office.",
            translation: "Nosotros usamos libros y lápices en la escuela, y ellos usan lápices y plumas en la oficina.",
            audio: "We use books and pencils at school, and they use pencils and pens at the office"
        }
    ],

    // Exercise 9 - English Translation exercise
    englishTranslationExercise9: [
        {
            q: "Este señor lee un buen libro.",
            translation: "This man reads a good book.",
            audio: "This man reads a good book"
        },
        {
            q: "¿Cuántos cuadernos hay sobre el escritorio?",
            translation: "How many notebooks are there on the desk?",
            audio: "How many notebooks are there on the desk?"
        },
        {
            q: "Yo llevo mi libro a la escuela todos los días.",
            translation: "I take my book to school every day.",
            audio: "I take my book to school every day"
        },
        {
            q: "Estas muchachas usan cuadernos, lápices y plumas en la oficina.",
            translation: "These girls use notebooks, pencils and pens in the office.",
            audio: "These girls use notebooks, pencils and pens in the office"
        },
        {
            q: "Me llamo Henry Brown.",
            translation: "My name is Henry Brown.",
            audio: "My name is Henry Brown"
        },
        {
            q: "¿Cómo está Ud.? Bien, gracias.",
            translation: "How are you? Fine, thank you.",
            audio: "How are you? Fine, thank you"
        },
        {
            q: "Hay una señorita americana aquí.",
            translation: "There's an American lady here.",
            audio: "There's an American lady here"
        },
        {
            q: "Hay tres teléfonos en la oficina.",
            translation: "There are three telephones in the office.",
            audio: "There are three telephones in the office"
        }
    ],

    // Exercise 10 - Dictation exercise
    dictationExercise10: [
        {
            q: "\"How are you?\" says Mary.",
            translation: "\"¿Cómo está Ud.?\" dice Mary.",
            audio: "How are you? says Mary"
        },
        {
            q: "\"Fine, thank you,\" say John and Robert.",
            translation: "\"Bien, gracias,\" dicen John y Robert.",
            audio: "Fine, thank you, say John and Robert"
        },
        {
            q: "There aren't four boys in the house.",
            translation: "No hay cuatro muchachos en la casa.",
            audio: "There aren't four boys in the house"
        },
        {
            q: "How many telephones are there in the office?",
            translation: "¿Cuántos teléfonos hay en la oficina?",
            audio: "How many telephones are there in the office?"
        },
        {
            q: "This boy takes a book to school.",
            translation: "Este muchacho lleva un libro a la escuela.",
            audio: "This boy takes a book to school"
        },
        {
            q: "These girls go to school in a car.",
            translation: "Estas muchachas van a la escuela en carro.",
            audio: "These girls go to school in a car"
        },
        {
            q: "How many girls work in the office?",
            translation: "¿Cuántas muchachas trabajan en la oficina?",
            audio: "How many girls work in the office?"
        },
        {
            q: "My name is Robert Brown.",
            translation: "Me llamo Robert Brown.",
            audio: "My name is Robert Brown"
        },
        {
            q: "Isn't there a pencil in this notebook?",
            translation: "¿No hay un lápiz en este cuaderno?",
            audio: "Isn't there a pencil in this notebook?"
        },
        {
            q: "Aren't there three notebooks on the desk?",
            translation: "¿No hay tres cuadernos sobre el escritorio?",
            audio: "Aren't there three notebooks on the desk?"
        }
    ],

    // Exercise 11 - Conversation Questions exercise
    conversationExercise11: [
        {
            q: "How are you?",
            affirmative: "Fine, thank you.",
            negative: "Not very well, thank you.",
            audio: "How are you?"
        },
        {
            q: "What's your name?",
            affirmative: "My name is [your name].",
            negative: "I prefer not to say.",
            audio: "What's your name?"
        },
        {
            q: "How many pencils are there on the desk?",
            affirmative: "There are [number] pencils on the desk.",
            negative: "There aren't any pencils on the desk.",
            audio: "How many pencils are there on the desk?"
        },
        {
            q: "How many phones are there in the office?",
            affirmative: "There are [number] phones in the office.",
            negative: "There aren't any phones in the office.",
            audio: "How many phones are there in the office?"
        }
    ],

    // Exercise 12 - Affirmative/Negative Answers exercise
    affirmativeNegativeExercise12: [
        {
            q: "Is there a notebook on the desk?",
            affirmative: "Yes, there is a notebook on the desk.",
            negative: "No, there isn't a notebook on the desk.",
            audio: "Is there a notebook on the desk?"
        },
        {
            q: "Aren't there Mexican boys here?",
            affirmative: "Yes, there are Mexican boys here.",
            negative: "No, there aren't any Mexican boys here.",
            audio: "Aren't there Mexican boys here?"
        },
        {
            q: "Aren't there girls in school?",
            affirmative: "Yes, there are girls in school.",
            negative: "No, there aren't any girls in school.",
            audio: "Aren't there girls in school?"
        },
        {
            q: "Aren't there desks in the office?",
            affirmative: "Yes, there are desks in the office.",
            negative: "No, there aren't any desks in the office.",
            audio: "Aren't there desks in the office?"
        },
        {
            q: "Is there an American boy here?",
            affirmative: "Yes, there is an American boy here.",
            negative: "No, there isn't an American boy here.",
            audio: "Is there an American boy here?"
        },
        {
            q: "Are there American girls here?",
            affirmative: "Yes, there are American girls here.",
            negative: "No, there aren't any American girls here.",
            audio: "Are there American girls here?"
        },
        {
            q: "Are you from Mexico?",
            affirmative: "Yes, I am from Mexico.",
            negative: "No, I am not from Mexico.",
            audio: "Are you from Mexico?"
        },
        {
            q: "Are the girls at home?",
            affirmative: "Yes, the girls are at home.",
            negative: "No, the girls aren't at home.",
            audio: "Are the girls at home?"
        },
        {
            q: "Is this book red?",
            affirmative: "Yes, this book is red.",
            negative: "No, this book isn't red.",
            audio: "Is this book red?"
        },
        {
            q: "Is this one green?",
            affirmative: "Yes, this one is green.",
            negative: "No, this one isn't green.",
            audio: "Is this one green?"
        },
        {
            q: "Are these cars American?",
            affirmative: "Yes, these cars are American.",
            negative: "No, these cars aren't American.",
            audio: "Are these cars American?"
        }
    ],

    // Initialize the lesson
    initialize: async function() {
        console.log('Starting Lesson 4 initialization...');
        
        // Initialize lesson state with vocabulary
        if (!window.lessonStates) {
            window.lessonStates = {};
        }
        
        window.lessonStates['L4'] = {
            currentFlashcardIndex: 0,
            isFlipped: false,
            vocabulary: this.vocabulary,
            initialized: true
        };

        try {
            // Initialize flashcards
            const flashcardContainer = document.querySelector('.flashcard-container');
            if (flashcardContainer) {
                console.log('Initializing flashcards with vocabulary:', this.vocabulary);
                window.flashcardModule.initializeFlashcards(flashcardContainer, this.vocabulary);
            } else {
                console.error('Flashcard container not found');
            }

            // Initialize exercises
            await this.initializeExercises();

            console.log('Lesson 4 initialization completed successfully');
        } catch (error) {
            console.error('Error during Lesson 4 initialization:', error);
            throw error;
        }
    },

    initializeExercises: async function() {
        console.log('Starting exercise initialization...');
        
        // Initialize Exercise 1
        const exercise1Container = document.getElementById('exercise1-L4');
        if (exercise1Container) {
            console.log('Initializing Exercise 1...');
            window.exerciseModule.initializeExercise(exercise1Container, this.translationExercise1, 'translation');
        }

        // Initialize Exercise 2
        const exercise2Container = document.getElementById('exercise2-L4');
        if (exercise2Container) {
            console.log('Initializing Exercise 2...');
            window.exerciseModule.initializeExercise(exercise2Container, this.prepositionExercise2, 'preposition');
        }

        // Initialize Exercise 3
        const exercise3Container = document.getElementById('exercise3-L4');
        if (exercise3Container) {
            console.log('Initializing Exercise 3...');
            const options = {
                formTypes: ['affirmative', 'negative', 'interrogative', 'negativeInterrogative'],
                labels: ['Traducción normal:', 'Forma negativa:', 'Forma interrogativa:', 'Forma interrogativa negativa:']
            };
            window.exerciseModule.initializeExercise(exercise3Container, this.transformationExercise3, 'multiForm', options);
        }

        // Initialize Exercise 4
        const exercise4Container = document.getElementById('exercise4-L4');
        if (exercise4Container) {
            console.log('Initializing Exercise 4...');
            window.exerciseModule.initializeExercise(exercise4Container, this.thereIsExercise4, 'thereIs');
        }

        // Initialize Exercise 5
        const exercise5Container = document.getElementById('exercise5-L4');
        if (exercise5Container) {
            console.log('Initializing Exercise 5...', this.thisTheseExercise5);
            window.exerciseModule.initializeExercise(exercise5Container, this.thisTheseExercise5, 'thisThese');
        } else {
            console.error('Exercise 5 container not found!');
        }

        // Initialize Exercise 6
        const exercise6Container = document.getElementById('exercise6-L4');
        if (exercise6Container) {
            console.log('Initializing Exercise 6...', this.translationExercise6);
            window.exerciseModule.initializeExercise(exercise6Container, this.translationExercise6, 'translation');
        } else {
            console.error('Exercise 6 container not found!');
        }

        // Initialize Exercise 7
        console.log('Looking for Exercise 7 container...');
        const exercise7Container = document.getElementById('exercise7-L4');
        if (exercise7Container) {
            console.log('Found Exercise 7 container, initializing with:', this.verbalPracticeExercise7);
            window.exerciseModule.initializeExercise(exercise7Container, this.verbalPracticeExercise7, 'translation');
            console.log('Exercise 7 initialization complete');
        } else {
            console.error('Exercise 7 container not found!');
        }

        // Initialize Exercise 8
        console.log('Looking for Exercise 8 container...');
        const exercise8Container = document.getElementById('exercise8-L4');
        if (exercise8Container) {
            console.log('Found Exercise 8 container, initializing with:', this.translationExercise8);
            window.exerciseModule.initializeExercise(exercise8Container, this.translationExercise8, 'translation');
            console.log('Exercise 8 initialization complete');
        } else {
            console.error('Exercise 8 container not found!');
        }
        
        console.log('Exercise initialization complete.');
    },

    // Update the flashcard display
    updateFlashcard: function() {
        const card = this.vocabulary[this.currentFlashcardIndex];
        const frontWord = document.querySelector('.flashcard-word');
        const frontExample = document.querySelector('.flashcard-example');
        const backTranslation = document.querySelector('.flashcard-translation');
        const audioBtn = document.querySelector('.audio-btn');
        
        if (frontWord) frontWord.textContent = card.en;
        if (frontExample) frontExample.textContent = card.example;
        if (backTranslation) backTranslation.textContent = card.es;
        if (audioBtn) audioBtn.setAttribute('onclick', `window.flashcardModule.speak('${card.audio}')`);
    },

    // Navigate to the next flashcard
    nextFlashcard: function() {
        this.currentFlashcardIndex = (this.currentFlashcardIndex + 1) % this.vocabulary.length;
        this.isFlipped = false;
        this.updateFlashcard();
        document.querySelector('.flashcard').classList.remove('flipped');
    },

    // Navigate to the previous flashcard
    prevFlashcard: function() {
        this.currentFlashcardIndex = (this.currentFlashcardIndex - 1 + this.vocabulary.length) % this.vocabulary.length;
        this.isFlipped = false;
        this.updateFlashcard();
        document.querySelector('.flashcard').classList.remove('flipped');
    },

    // Flip the current flashcard
    flipFlashcard: function() {
        this.isFlipped = !this.isFlipped;
        document.querySelector('.flashcard').classList.toggle('flipped');
    }
};

// Register the lesson module
window.lessonModules.lesson4 = lesson4;

// Initialize when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
    try {
        console.log('Initializing Lesson 4 module...');
        lesson4.initialize();
        console.log('Lesson 4 module initialized successfully');
    } catch (error) {
        console.error('Error initializing Lesson 4:', error);
    }
}); 